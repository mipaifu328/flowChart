<!--
 * @Descripttion: 
 * @version: 1.0
 * @Author: mipaifu328
 * @Date: 2022-06-14 15:32:04
 * @LastEditors: mipaifu328
 * @LastEditTime: 2022-06-16 14:52:51
-->
<script setup lang="ts">
import { ref } from 'vue'
import { useLocalStorage } from '@vueuse/core'
import FlowChart from './components/FlowChart/FlowChart.vue'
let demoData =
  '{"cells":[{"shape":"edge","attrs":{"line":{"stroke":"#dd0022","targetMarker":{"name":"block","width":12,"height":8}}},"id":"c80475c5-2fe8-4a15-89bb-a7ca6a78e636","zIndex":0,"source":{"cell":"5ed1461c-6271-461d-9ab1-cf7f535fdd45","port":"778b9379-4a33-4961-8f31-97054945c99c"},"target":{"cell":"8c62f5d7-e80d-4c82-8706-e05d708a9217","port":"2f7b1f4e-4bf9-4486-ba21-4b6a23c8a558"}},{"shape":"edge","attrs":{"line":{"stroke":"#00DD21","targetMarker":{"name":"block","width":12,"height":8}}},"id":"420705b7-a921-4003-b9e9-e79c3e7f9b17","zIndex":0,"source":{"cell":"8c62f5d7-e80d-4c82-8706-e05d708a9217","port":"df08c7c6-80fa-47f1-ba36-9caf651663fe"},"target":{"cell":"eef39a56-e967-46c1-8c0a-9fcf2b4c4737","port":"f4115e0d-f244-4c8d-8f13-122ab2aecbf7"}},{"shape":"edge","attrs":{"line":{"stroke":"#DD0700","targetMarker":{"name":"block","width":12,"height":8}}},"id":"786b1beb-6446-4ebe-8030-5ba9c4f6fd35","zIndex":0,"source":{"cell":"eef39a56-e967-46c1-8c0a-9fcf2b4c4737","port":"2a964d22-843e-4c40-a5e8-c973863880c8"},"target":{"cell":"07b4d929-f7e6-4d3d-a165-8bac4f5eee5e","port":"b64b0b98-9910-4929-ac9c-ca74803ce230"}},{"shape":"edge","attrs":{"line":{"stroke":"#DD0700","targetMarker":{"name":"block","width":12,"height":8}}},"id":"9e987b6c-513c-400d-be90-576acfc66f42","zIndex":0,"source":{"cell":"07b4d929-f7e6-4d3d-a165-8bac4f5eee5e","port":"61b0aaad-9370-4630-afec-eda370e39479"},"target":{"cell":"d2633c63-78f0-49e6-91d9-dd0557d48589","port":"b4a994d4-26a4-4a10-bf2a-628a25b2ba66"}},{"position":{"x":230,"y":80},"size":{"width":66,"height":36},"attrs":{"text":{"text":"开始"},"body":{"rx":20,"ry":26}},"shape":"custom-rect","data":[{"key":"state","title":"状态","value":"on"},{"key":"apply","title":"申请人","value":"张三"}],"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#22dd33","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}}},"items":[{"group":"top","id":"b4a994d4-26a4-4a10-bf2a-628a25b2ba66"},{"group":"right","id":"00a64b03-d578-4a3c-8d97-54a9673f4895"},{"group":"bottom","id":"778b9379-4a33-4961-8f31-97054945c99c"},{"group":"left","id":"38c5d440-4879-4353-b7e9-7dd5e466605f"}]},"id":"5ed1461c-6271-461d-9ab1-cf7f535fdd45","zIndex":1},{"position":{"x":230,"y":159},"size":{"width":66,"height":36},"attrs":{"text":{"text":"决策"},"body":{"refPoints":"0,10 10,0 20,10 10,20"}},"shape":"custom-polygon","ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#22dd33","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}}},"items":[{"group":"top","id":"2f7b1f4e-4bf9-4486-ba21-4b6a23c8a558"},{"group":"bottom","id":"df08c7c6-80fa-47f1-ba36-9caf651663fe"}]},"id":"8c62f5d7-e80d-4c82-8706-e05d708a9217","zIndex":2},{"position":{"x":230,"y":252},"size":{"width":66,"height":36},"attrs":{"text":{"text":"过程"}},"shape":"custom-rect","data":[{"key":"state","title":"状态","value":"on"},{"key":"apply","title":"申请人","value":"张三"}],"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#22dd33","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}}},"items":[{"group":"top","id":"f4115e0d-f244-4c8d-8f13-122ab2aecbf7"},{"group":"right","id":"157ffd90-33e0-4cb4-8de0-d2083eca5635"},{"group":"bottom","id":"2a964d22-843e-4c40-a5e8-c973863880c8"},{"group":"left","id":"187f06b6-c421-456a-b878-0aff5579b847"}]},"id":"eef39a56-e967-46c1-8c0a-9fcf2b4c4737","zIndex":3},{"position":{"x":241,"y":320},"size":{"width":45,"height":45},"attrs":{"text":{"text":"连接"}},"shape":"custom-circle","ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#22dd33","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}}},"items":[{"group":"top","id":"b64b0b98-9910-4929-ac9c-ca74803ce230"},{"group":"right","id":"14bbed71-b041-4df5-9616-f8bf802cd709"},{"group":"bottom","id":"61b0aaad-9370-4630-afec-eda370e39479"},{"group":"left","id":"4f918164-5a87-4bf4-ad31-8a1d909d1f76"}]},"id":"07b4d929-f7e6-4d3d-a165-8bac4f5eee5e","zIndex":4},{"position":{"x":230,"y":407},"size":{"width":66,"height":36},"attrs":{"text":{"text":"结束"},"body":{"rx":20,"ry":26}},"shape":"custom-rect","data":[{"key":"state","title":"状态","value":"on"},{"key":"apply","title":"申请人","value":"张三"}],"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#22dd33","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#5F95FF","strokeWidth":1,"fill":"#fff","style":{"visibility":"hidden"}}}}},"items":[{"group":"top","id":"b4a994d4-26a4-4a10-bf2a-628a25b2ba66"},{"group":"right","id":"00a64b03-d578-4a3c-8d97-54a9673f4895"},{"group":"bottom","id":"778b9379-4a33-4961-8f31-97054945c99c"},{"group":"left","id":"38c5d440-4879-4353-b7e9-7dd5e466605f"}]},"id":"d2633c63-78f0-49e6-91d9-dd0557d48589","zIndex":5}]}'
let jsonData = useLocalStorage('jsonData', demoData)

const saveJsonData = (data: string) => {
  jsonData.value = data
}
</script>

<template>
  <FlowChart :jsonData="jsonData" @saveJsonData="saveJsonData" />
</template>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
}
</style>
